<app-sidebar></app-sidebar>

<div class="card-management-container">
  <div class="card shadow-sm">
    <!-- Titre de la carte -->
    <div class="card-header">
      <h3 class="mb-0">Gestion des cartes</h3>
    </div>

    <!-- Contenu de la carte -->
    <div class="card-body">
      <div *ngIf="loading" class="loading">Chargement des employés...</div>

      <table class="table table-striped mt-3" *ngIf="!loading">
        <thead>
          <tr>
            <th>Photo</th>
            <th>Prénom et Nom</th>
            <th>Email</th>
            <th>Rôle</th>
            <th>Matricule</th>
            <th>cardID</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of paginatedEmployees">
            <td>
              <img
                [src]="'http://127.0.0.1:8000/photos/' + employee.photo"
                alt="{{ employee.prenom }} {{ employee.nom }}"
                style="width: 50px; height: 50px; border-radius: 50%;"
              >
            </td>
            <td>{{ employee.prenom }} {{ employee.nom }}</td>
            <td>{{ employee.email }}</td>
            <td>{{ employee.role }}</td>
            <td>{{ employee.matricule }}</td>
            <td>{{ employee.cardID }}</td>
            <td>
              <button
                class="btn btn-success btn-sm"
                (click)="openAssignCard(employee.id)"
              >
                Assigner
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Pagination -->
      <div class="pagination d-flex justify-content-center mt-3">
        <button
          class="btn btn-outline-primary me-2"
          [disabled]="currentPage === 1"
          (click)="previousPage()"
        >
          Précédent
        </button>
        <span>Page {{ currentPage }} sur {{ totalPages }}</span>
        <button
          class="btn btn-outline-primary ms-2"
          [disabled]="currentPage === totalPages"
          (click)="nextPage()"
        >
          Suivant
        </button>
      </div>
    </div>
  </div>
</div>
