<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light">
  <!-- Carte -->
  <div class="card shadow-lg d-flex flex-row overflow-hidden rounded" style="max-width: 1200px; border-radius: 20px;">
    
    <!-- Partie gauche : Formulaire avec image de fond -->
    <div class="left-section p-4 d-flex flex-column justify-content-end position-relative text-white" style="margin-left: 20px;"> <!-- Déplacement vers la gauche -->
      <!-- Contenu du formulaire -->
      <div class="text-start w-100"> <!-- Alignement à gauche -->
        <h1 class="mb-4 fw-bold welcome-title">Bienvenue</h1>
        <form class="w-100" (ngSubmit)="onSubmit()" #loginForm="ngForm">
          
          <!-- Champ Email -->
          <div class="form-group mb-3">
            <label for="email" class="form-label text-white fw-bold">Email</label>
            <input type="email" id="email" name="email" class="form-control bg-transparent w-100 text-white border-0 border-bottom rounded-0"
                   placeholder="Entrez votre email" required email #email="ngModel" [(ngModel)]="user.email">
            <div *ngIf="email.invalid && email.touched" class="text-danger">
              <small *ngIf="email.errors?.['required']">L'email est requis.</small>
              <small *ngIf="email.errors?.['email']">Veuillez entrer un email valide.</small>
            </div>
          </div>

          <!-- Champ Mot de passe -->
          <div class="form-group mb-3">
            <label for="password" class="form-label text-white fw-bold">Mot de passe</label>
            <div class="d-flex align-items-center">
              <input [type]="showPassword ? 'text' : 'password'" id="password" name="password" class="form-control w-100 bg-transparent  text-white border-0 border-bottom rounded-0"
                     placeholder="Entrez votre mot de passe" required minlength="8" #password="ngModel" [(ngModel)]="user.password">
              <span class="eye-icon ms-2" (click)="togglePasswordVisibility()">
                <i [ngClass]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
              </span>
            </div>
            <div *ngIf="password.invalid && password.touched" class="text-danger">
              <small *ngIf="password.errors?.['required']">Le mot de passe est requis.</small>
              <small *ngIf="password.errors?.['minlength']">Le mot de passe doit comporter au moins 8 caractères.</small>
            </div>
          </div>

          <!-- Bouton de connexion -->
          <button type="submit" class="btn btn-light w-100 fw-bold" [disabled]="isLoading || loginForm.invalid">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            CONNEXION
          </button>

          <!-- Message d'erreur -->
          <div *ngIf="errorMessage" class="alert alert-danger mt-3">
            {{ errorMessage }}
          </div>

          <!-- Lien Mot de passe oublié -->
          <div class="text-center mt-2">
            <a href="/reset-password" class="text-white" style="text-decoration: none; font-size: 0.9rem;">Mot de passe oublié ?</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Partie droite : Image de fond -->
    <div class="right-section"></div>
  </div>
</div>